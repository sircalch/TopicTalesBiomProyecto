{% extends 'base.html' %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item"><a href="{% url 'specialties:index' %}">Especialidades</a></li>
<li class="breadcrumb-item"><a href="{% url 'specialties:traumatology' %}">{{ specialty_name }}</a></li>
<li class="breadcrumb-item active">{{ page_title }}</li>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm bg-gradient" style="background: linear-gradient(135deg, #607d8b 0%, #455a64 100%);">
                <div class="card-body text-white py-4">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <div class="d-flex align-items-center">
                                <div class="specialty-icon me-4">
                                    <i class="fas fa-x-ray fa-3x"></i>
                                </div>
                                <div>
                                    <h1 class="h2 mb-1">{{ page_title }}</h1>
                                    <p class="mb-0 opacity-75">{{ description }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 text-end">
                            <div class="d-flex gap-2 justify-content-end">
                                <button class="btn btn-light btn-sm">
                                    <i class="fas fa-plus me-1"></i>Solicitar Radiografía
                                </button>
                                <button class="btn btn-outline-light btn-sm">
                                    <i class="fas fa-eye me-1"></i>Ver Imágenes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card stats-card h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="stats-label text-muted small">Radiografías Hoy</div>
                            <div class="stats-number h3 mb-0 text-primary">28</div>
                            <small class="text-success"><i class="fas fa-arrow-up me-1"></i>+12%</small>
                        </div>
                        <div class="stats-icon text-primary">
                            <i class="fas fa-x-ray fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card stats-card h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="stats-label text-muted small">Estudios Normales</div>
                            <div class="stats-number h3 mb-0 text-success">18</div>
                            <small class="text-success"><i class="fas fa-check me-1"></i>64%</small>
                        </div>
                        <div class="stats-icon text-success">
                            <i class="fas fa-check-circle fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card stats-card h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="stats-label text-muted small">Fracturas Detectadas</div>
                            <div class="stats-number h3 mb-0 text-warning">7</div>
                            <small class="text-warning"><i class="fas fa-exclamation me-1"></i>25%</small>
                        </div>
                        <div class="stats-icon text-warning">
                            <i class="fas fa-bone fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card stats-card h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="stats-label text-muted small">Estudios Pendientes</div>
                            <div class="stats-number h3 mb-0 text-danger">3</div>
                            <small class="text-info"><i class="fas fa-clock me-1"></i>Interpretación</small>
                        </div>
                        <div class="stats-icon text-danger">
                            <i class="fas fa-hourglass-half fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="row">
        <!-- X-Ray Studies -->
        <div class="col-lg-8 mb-4">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-x-ray text-primary me-2"></i>Estudios Radiológicos
                    </h5>
                    <div class="d-flex gap-2">
                        <select class="form-select form-select-sm" style="width: auto;">
                            <option>Todos</option>
                            <option>Miembro superior</option>
                            <option>Miembro inferior</option>
                            <option>Columna</option>
                            <option>Tórax</option>
                        </select>
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-filter me-1"></i>Filtros
                        </button>
                    </div>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>Paciente</th>
                                    <th>Estudio</th>
                                    <th>Región</th>
                                    <th>Fecha</th>
                                    <th>Hallazgos</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <img src="https://via.placeholder.com/40x40/607d8b/ffffff?text=RM" 
                                                 class="rounded-circle me-3" width="40" height="40" alt="Avatar">
                                            <div>
                                                <div class="fw-medium">Roberto Morales</div>
                                                <small class="text-muted">45 años, Carpintero</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="fw-medium">Rx Antebrazo</span>
                                        <br><small class="text-muted">AP y Lateral</small>
                                    </td>
                                    <td>
                                        <span class="fw-medium">Radio distal</span>
                                        <br><small class="text-muted">Muñeca derecha</small>
                                    </td>
                                    <td>
                                        <div class="fw-medium">31 Ene 2025</div>
                                        <small class="text-muted">10:30 AM</small>
                                    </td>
                                    <td>
                                        <span class="badge bg-warning">Fractura de Colles</span>
                                        <br><small class="text-muted">Desplazada</small>
                                    </td>
                                    <td><span class="badge bg-success">Interpretado</span></td>
                                    <td>
                                        <div class="btn-group btn-group-sm">
                                            <button class="btn btn-outline-primary" title="Ver imágenes">
                                                <i class="fas fa-images"></i>
                                            </button>
                                            <button class="btn btn-outline-warning" title="Tratamiento">
                                                <i class="fas fa-hand-paper"></i>
                                            </button>
                                            <button class="btn btn-outline-info" title="Reporte">
                                                <i class="fas fa-file-alt"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <img src="https://via.placeholder.com/40x40/607d8b/ffffff?text=LC" 
                                                 class="rounded-circle me-3" width="40" height="40" alt="Avatar">
                                            <div>
                                                <div class="fw-medium">Laura Castro</div>
                                                <small class="text-muted">32 años, Deportista</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="fw-medium">Rx Rodilla</span>
                                        <br><small class="text-muted">AP, Lateral, Axial</small>
                                    </td>
                                    <td>
                                        <span class="fw-medium">Articulación</span>
                                        <br><small class="text-muted">Rodilla izquierda</small>
                                    </td>
                                    <td>
                                        <div class="fw-medium">31 Ene 2025</div>
                                        <small class="text-muted">11:15 AM</small>
                                    </td>
                                    <td>
                                        <span class="badge bg-success">Normal</span>
                                        <br><small class="text-muted">Sin alteraciones</small>
                                    </td>
                                    <td><span class="badge bg-success">Interpretado</span></td>
                                    <td>
                                        <div class="btn-group btn-group-sm">
                                            <button class="btn btn-outline-primary" title="Ver imágenes">
                                                <i class="fas fa-images"></i>
                                            </button>
                                            <button class="btn btn-outline-success" title="Alta">
                                                <i class="fas fa-check"></i>
                                            </button>
                                            <button class="btn btn-outline-info" title="Reporte">
                                                <i class="fas fa-file-alt"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <img src="https://via.placeholder.com/40x40/607d8b/ffffff?text=JL" 
                                                 class="rounded-circle me-3" width="40" height="40" alt="Avatar">
                                            <div>
                                                <div class="fw-medium">José López</div>
                                                <small class="text-muted">28 años, Motociclista</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="fw-medium">Rx Tobillo</span>
                                        <br><small class="text-muted">AP, Lateral, Mortaja</small>
                                    </td>
                                    <td>
                                        <span class="fw-medium">Maleolar</span>
                                        <br><small class="text-muted">Tobillo derecho</small>
                                    </td>
                                    <td>
                                        <div class="fw-medium">30 Ene 2025</div>
                                        <small class="text-muted">15:20 PM</small>
                                    </td>
                                    <td>
                                        <span class="badge bg-danger">Fractura bimaleolar</span>
                                        <br><small class="text-muted">Con desplazamiento</small>
                                    </td>
                                    <td><span class="badge bg-warning">Cirugía programada</span></td>
                                    <td>
                                        <div class="btn-group btn-group-sm">
                                            <button class="btn btn-outline-primary" title="Ver imágenes">
                                                <i class="fas fa-images"></i>
                                            </button>
                                            <button class="btn btn-danger" title="Quirófano">
                                                <i class="fas fa-user-md"></i>
                                            </button>
                                            <button class="btn btn-outline-secondary" title="TAC">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <img src="https://via.placeholder.com/40x40/607d8b/ffffff?text=MF" 
                                                 class="rounded-circle me-3" width="40" height="40" alt="Avatar">
                                            <div>
                                                <div class="fw-medium">María Fernández</div>
                                                <small class="text-muted">67 años, Ama de casa</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="fw-medium">Rx Cadera</span>
                                        <br><small class="text-muted">AP Pelvis</small>
                                    </td>
                                    <td>
                                        <span class="fw-medium">Cuello femoral</span>
                                        <br><small class="text-muted">Cadera izquierda</small>
                                    </td>
                                    <td>
                                        <div class="fw-medium">30 Ene 2025</div>
                                        <small class="text-muted">09:45 AM</small>
                                    </td>
                                    <td>
                                        <span class="badge bg-danger">Fractura subcapital</span>
                                        <br><small class="text-muted">Garden III</small>
                                    </td>
                                    <td><span class="badge bg-primary">En quirófano</span></td>
                                    <td>
                                        <div class="btn-group btn-group-sm">
                                            <button class="btn btn-outline-primary" title="Ver imágenes">
                                                <i class="fas fa-images"></i>
                                            </button>
                                            <button class="btn btn-primary" title="Seguimiento QX">
                                                <i class="fas fa-heartbeat"></i>
                                            </button>
                                            <button class="btn btn-outline-info" title="Prótesis">
                                                <i class="fas fa-cog"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- X-Ray Tools & Anatomy -->
        <div class="col-lg-4 mb-4">
            <!-- Quick Actions -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-tools text-primary me-2"></i>Herramientas Radiológicas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <button class="btn btn-primary btn-sm">
                            <i class="fas fa-plus me-2"></i>Solicitar Radiografía
                        </button>
                        <button class="btn btn-outline-info btn-sm">
                            <i class="fas fa-eye me-2"></i>Visor de Imágenes
                        </button>
                        <button class="btn btn-outline-success btn-sm">
                            <i class="fas fa-ruler me-2"></i>Herramientas Medición
                        </button>
                        <button class="btn btn-outline-warning btn-sm">
                            <i class="fas fa-compare me-2"></i>Comparar Estudios
                        </button>
                        <hr>
                        <button class="btn btn-outline-secondary btn-sm">
                            <i class="fas fa-download me-2"></i>Descargar DICOM
                        </button>
                        <button class="btn btn-outline-dark btn-sm">
                            <i class="fas fa-print me-2"></i>Imprimir Reporte
                        </button>
                    </div>
                </div>
            </div>

            <!-- Anatomical Regions -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-user text-info me-2"></i>Regiones Anatómicas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="anatomy-item d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <div class="fw-medium">Miembro Superior</div>
                            <small class="text-muted">Hombro, brazo, antebrazo, mano</small>
                        </div>
                        <span class="badge bg-primary">35%</span>
                    </div>
                    
                    <div class="anatomy-item d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <div class="fw-medium">Miembro Inferior</div>
                            <small class="text-muted">Cadera, muslo, rodilla, pierna, pie</small>
                        </div>
                        <span class="badge bg-success">40%</span>
                    </div>
                    
                    <div class="anatomy-item d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <div class="fw-medium">Columna Vertebral</div>
                            <small class="text-muted">Cervical, dorsal, lumbar</small>
                        </div>
                        <span class="badge bg-warning">15%</span>
                    </div>
                    
                    <div class="anatomy-item d-flex justify-content-between align-items-center">
                        <div>
                            <div class="fw-medium">Tórax</div>
                            <small class="text-muted">Costillas, esternón</small>
                        </div>
                        <span class="badge bg-info">10%</span>
                    </div>
                </div>
            </div>

            <!-- Fracture Classification -->
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-bone text-warning me-2"></i>Clasificación de Fracturas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="fracture-type mb-3">
                        <h6 class="fw-bold text-primary">Por Trazo</h6>
                        <ul class="list-unstyled small">
                            <li><strong>Transversa:</strong> Perpendicular al eje</li>
                            <li><strong>Oblicua:</strong> Diagonal al eje</li>
                            <li><strong>Espiral:</strong> Rotacional</li>
                            <li><strong>Conminuta:</strong> Múltiples fragmentos</li>
                        </ul>
                    </div>
                    
                    <div class="fracture-type mb-3">
                        <h6 class="fw-bold text-success">Por Desplazamiento</h6>
                        <ul class="list-unstyled small">
                            <li><strong>Sin desplazar:</strong> Fragmentos alineados</li>
                            <li><strong>Desplazada:</strong> Pérdida de alineación</li>
                            <li><strong>Angulada:</strong> Cambio de eje</li>
                            <li><strong>Impactada:</strong> Fragmentos encajados</li>
                        </ul>
                    </div>
                    
                    <div class="fracture-type">
                        <h6 class="fw-bold text-info">Por Localización</h6>
                        <ul class="list-unstyled small">
                            <li><strong>Epifisaria:</strong> Extremo del hueso</li>
                            <li><strong>Metafisaria:</strong> Zona de transición</li>
                            <li><strong>Diafisaria:</strong> Cuerpo del hueso</li>
                            <li><strong>Intraarticular:</strong> Compromete articulación</li>
                        </ul>
                    </div>
                    
                    <hr>
                    
                    <div class="urgency-levels">
                        <h6 class="fw-bold text-center mb-3">Niveles de Urgencia</h6>
                        <div class="row">
                            <div class="col-6 mb-2">
                                <div class="p-2 bg-danger text-white rounded text-center">
                                    <small class="fw-bold">Urgente</small>
                                    <br><small>Fracturas abiertas</small>
                                </div>
                            </div>
                            <div class="col-6 mb-2">
                                <div class="p-2 bg-warning text-white rounded text-center">
                                    <small class="fw-bold">Prioritario</small>
                                    <br><small>Desplazadas</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="p-2 bg-primary text-white rounded text-center">
                                    <small class="fw-bold">Programado</small>
                                    <br><small>Estables</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="p-2 bg-success text-white rounded text-center">
                                    <small class="fw-bold">Conservador</small>
                                    <br><small>Sin desplazar</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.bg-gradient {
    background: linear-gradient(135deg, #607d8b 0%, #455a64 100%);
}

.stats-card {
    border: none;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.stats-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

.stats-number {
    font-weight: 700;
    line-height: 1.2;
}

.stats-icon {
    opacity: 0.7;
}

.specialty-icon {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.anatomy-item {
    padding: 8px 0;
    border-bottom: 1px solid #f1f3f4;
}

.anatomy-item:last-child {
    border-bottom: none;
}

.fracture-type {
    padding: 10px 0;
}

.urgency-levels {
    background: rgba(96, 125, 139, 0.05);
    border-radius: 8px;
    padding: 15px;
}

@media (max-width: 768px) {
    .specialty-icon {
        display: none;
    }
}
</style>
{% endblock %}